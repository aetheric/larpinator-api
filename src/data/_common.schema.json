{
	"$id": "https://larpinator.aetheric.co.nz/_common.schema.json",
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"definitions": {

		"entity": {
			"description": "An abstract data entity.",
			"type": "object",
			"required": [
				"id",
				"name"
			],
			"properties": {

				"id": { "$ref": "#/definitions/entity_id" },

				"name": {
					"description": "The name of the entity.",
					"type": "string",
					"minLength": 1
				},

				"updates": {
					"description": "A list of status transitions for this entity.",
					"type": "array",
					"items": { "$ref": "#/definitions/entity_update" }
				}

			}
		},

		"entity_id": {
			"description": "An identifier used to look-up and reference items.",
			"type": "string",
			"minLength": 1
		},

		"entity_update": {
			"description": "The details of an individual entity update.",
			"type": "object",
			"required": [
				"status",
				"notes",
				"time"
			],
			"properties": {

				"status": {
					"description": "The status transition occurring.",
					"type": "string",
					"minLength": 1
				},

				"notes": {
					"description": "Information describing the update.",
					"type": "string",
					"default": ""
				},

				"time": {
					"description": "The time that the update occurred.",
					"type": "string"
				}

			}
		},

		"rating": {
			"description": "A rating between -2 - +2, with null representing no set priority.",
			"oneOf": [
				{
					"type": "integer",
					"minimum": -2,
					"maximum": 2,
					"default": 0
				},
				{
					"type": "null"
				}
			]
		},

		"referential": {
			"description": "A structure that references another entity.",
			"type": "object",
			"required": [
				"reference"
			],
			"properties": {

				"reference": { "$ref": "#/definitions/entity" }

			}
		},

		"referential_with_relevance": {
			"description": "A structure that references another entity with relevance.",
			"allOf": [ { "$ref": "#/definitions/referential" } ],
			"required": [
				"relevance"
			],
			"properties": {

				"relevance": {
					"description": "The relevance the referred entity has to the subject.",
					"type": "string"
				}

			}
		},

		"tag": {
			"description": "A tag used for free-form categorisation of content.",
			"type": "string",
			"minLength": 1
		}

	}
}
