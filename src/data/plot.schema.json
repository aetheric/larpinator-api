{
	"$id": "https://larpinator.aetheric.co.nz/plot.schema.json",
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"title": "Plot",
	"type": "object",
	"required": [
		"title",
		"updates"
	],
	"properties": {

		"title": {
			"description": "The name of the plot.",
			"type": "string"
		},

		"priority": {
			"description": "How important that this plot be completed.",
			"allOf": [ { "$ref": "./_common.schema.json#/definitions/rating" } ]
		},

		"size": {
			"description": "The estimated participation in the plot.",
			"allOf": [ { "$ref": "./_common.schema.json#/definitions/rating" } ]
		},

		"timing": {
			"description": "Which hour the plot is scheduled for.",
			"type": "integer",
			"minimum": 0
		},

		"duration": {
			"description": "The estimated time this plot will take to run.",
			"allOf": [ { "$ref": "./_common.schema.json#/definitions/rating" } ]
		},

		"synopsis": {
			"description": "A full description of the plot.",
			"type": "string"
		},

		"objectives": {
			"description": "The goals for running the plot.",
			"type": "array",
			"minItems": 1,
			"items": {
				"type": "object",
				"required": [
					"description"
				],
				"properties": {

					"description": {
						"description": "A description of the objective.",
						"type": "string",
						"minLength": 1
					},

					"tags": {
						"description": "A list of topic tags.",
						"type": "array",
						"items": {
							"type": "string"
						}
					}

				}
			}
		},

		"participants": {
			"description": "The characters or factions involved in the plot.",
			"type": "array",
			"items": {
				"type": "object",
				"required": [
					"type",
					"id"
				],
				"properties": {

					"type": {
						"description": "The type of the participant",
						"type": "string",
						"enum": [
							"character",
							"faction"
						]
					},

					"id": {
						"description": "The reference identifier of the participant.",
						"type": "string"
					},

					"role": {
						"description": "The role the participant plays in the plot.",
						"type": "string"
					}

				}
			}
		},

		"locations": {
			"description": "The locations the plot will interact with.",
			"type": "array",
			"items": {
				"type": "object",
				"required": [
					"id"
				],
				"properties": {

					"id": {
						"description": "The reference identifier of the location.",
						"type": "string"
					},

					"role": {
						"description": "The role the resource plays in the plot.",
						"type": "string"
					}

				}
			}
		},

		"resources": {
			"description": "The physical resources required for the plot.",
			"type": "array",
			"items": {
				"type": "object",
				"required": [
					"type",
					"id"
				],
				"properties": {

					"type": {
						"description": "The type of the resource.",
						"type": "string"
					},

					"id": {
						"description": "The reference identifier of the resource.",
						"type": "string"
					},

					"role": {
						"description": "The role the resource plays in the plot.",
						"type": "string"
					},

					"qty_min": {
						"description": "Minimum amount of the resource needed to run the plot.",
						"type": "integer",
						"minimum": 1,
						"default": 1
					},

					"qty_scale": {
						"description": "How many of the resource will be required per unit of scale (rounding down).",
						"type": "number",
						"minimum": 0.0,
						"default": 0.0
					}

				}
			}
		},

		"outcomes": {
			"description": "The expected ways the plot can end.",
			"type": "array",
			"minItems": 1,
			"items": {
				"type": "object",
				"required": [
					"description",
					"result"
				],
				"properties": {

					"description": {
						"description": "Description of the outcome.",
						"type": "string"
					},

					"result": {
						"description": "How 'good' the outcome is.",
						"allOf": [ { "$ref": "./_common.schema.json#/definitions/rating" } ]
					}

				}
			}
		},

		"updates": {
			"description": "A list of status transitions for this plot.",
			"type": "array",
			"items": {
				"type": "object",
				"required": [
					"status",
					"notes",
					"time"
				],
				"properties": {

					"status": {
						"description": "The status transition occurring.",
						"type": "string",
						"default": "proposed",
						"enum": [
							"proposed",
							"writing",
							"ready",
							"running",
							"complete",
							"cancelled"
						]
					},

					"notes": {
						"description": "Information describing the update.",
						"type": "string",
						"default": ""
					},

					"time": {
						"description": "The time that the update occurred.",
						"type": "string"
					}

				}
			}
		}

	}
}
